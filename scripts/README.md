# æ”¯ä»˜ç³»ç»ŸSQLè„šæœ¬è¯´æ˜

## ğŸ“‹ è„šæœ¬åˆ—è¡¨

### 1. è¡¨ç»“æ„åˆ›å»º
- **`create_payment_methods_tables.sql`** - å®Œæ•´çš„è¡¨ç»“æ„åˆ›å»ºè„šæœ¬
  - åŒ…å«æ”¯ä»˜æœåŠ¡å•†è¡¨å’Œæ”¯ä»˜æ–¹å¼è¡¨
  - æ— å¤–é”®çº¦æŸï¼Œåªæœ‰é€»è¾‘å…³è”
  - åŒ…å«ç´¢å¼•å’Œæ³¨é‡Š
  - åŒ…å«åŸºç¡€åˆå§‹æ•°æ®

### 2. æ•°æ®åˆå§‹åŒ–
- **`init_payment_data_only.sql`** - åªæ’å…¥åˆå§‹æ•°æ®ï¼ˆæ¨èï¼‰
  - é€‚ç”¨äºGORMè‡ªåŠ¨è¿ç§»çš„æƒ…å†µ
  - åªåŒ…å«æ•°æ®æ’å…¥ï¼Œä¸åˆ›å»ºè¡¨ç»“æ„
  
- **`init_payment_methods_test_data.sql`** - å®Œæ•´æµ‹è¯•æ•°æ®
  - åŒ…å«æ›´å¤šæµ‹è¯•ç”¨çš„æ”¯ä»˜æ–¹å¼å’ŒæœåŠ¡å•†
  - é€‚ç”¨äºå¼€å‘å’Œæµ‹è¯•ç¯å¢ƒ

### 3. æ•°æ®ç»´æŠ¤
- **`check_payment_data_integrity.sql`** - æ•°æ®å®Œæ•´æ€§æ£€æŸ¥
  - æ£€æŸ¥æ— æ•ˆçš„æœåŠ¡å•†å¼•ç”¨
  - æ£€æŸ¥çŠ¶æ€ä¸ä¸€è‡´çš„æƒ…å†µ
  - æ£€æŸ¥é‡å¤æ•°æ®
  - éªŒè¯é…ç½®åˆç†æ€§

- **`fix_payment_data_integrity.sql`** - æ•°æ®ä¿®å¤è„šæœ¬
  - è‡ªåŠ¨ä¿®å¤å¸¸è§çš„æ•°æ®ä¸ä¸€è‡´é—®é¢˜
  - ç¦ç”¨æ— æ•ˆå…³è”çš„æ”¯ä»˜æ–¹å¼
  - ä¿®å¤ä¸åˆç†çš„é…ç½®

### 4. APIæµ‹è¯•
- **`test_payment_methods_api.sh`** - APIåŠŸèƒ½æµ‹è¯•è„šæœ¬
  - æµ‹è¯•æ”¯ä»˜æ–¹å¼åˆ—è¡¨API
  - æµ‹è¯•å……å€¼é€‰é¡¹API
  - åŒ…å«ä¸åŒå‚æ•°çš„æµ‹è¯•ç”¨ä¾‹

## ğŸš€ ä½¿ç”¨æ–¹å¼

### æ–¹å¼ä¸€ï¼šGORMè‡ªåŠ¨è¿ç§»ï¼ˆæ¨èï¼‰

```bash
# 1. å¯åŠ¨åº”ç”¨ï¼ŒGORMä¼šè‡ªåŠ¨åˆ›å»ºè¡¨ç»“æ„
go run ./cmd/server

# 2. æ’å…¥åˆå§‹æ•°æ®
psql -d your_database -f scripts/init_payment_data_only.sql

# 3. éªŒè¯æ•°æ®
psql -d your_database -f scripts/check_payment_data_integrity.sql
```

### æ–¹å¼äºŒï¼šæ‰‹åŠ¨åˆ›å»ºè¡¨ç»“æ„

```bash
# 1. åˆ›å»ºè¡¨ç»“æ„å’ŒåŸºç¡€æ•°æ®
psql -d your_database -f scripts/create_payment_methods_tables.sql

# 2. æ·»åŠ æ›´å¤šæµ‹è¯•æ•°æ®ï¼ˆå¯é€‰ï¼‰
psql -d your_database -f scripts/init_payment_methods_test_data.sql

# 3. éªŒè¯æ•°æ®å®Œæ•´æ€§
psql -d your_database -f scripts/check_payment_data_integrity.sql
```

## ğŸ”§ ç»´æŠ¤æ“ä½œ

### å®šæœŸæ£€æŸ¥æ•°æ®å®Œæ•´æ€§
```bash
# æ£€æŸ¥æ•°æ®æ˜¯å¦æœ‰é—®é¢˜
psql -d your_database -f scripts/check_payment_data_integrity.sql

# å¦‚æœå‘ç°é—®é¢˜ï¼Œè¿è¡Œä¿®å¤è„šæœ¬
psql -d your_database -f scripts/fix_payment_data_integrity.sql
```

### APIåŠŸèƒ½æµ‹è¯•
```bash
# ç¡®ä¿æœåŠ¡å™¨è¿è¡Œåœ¨ localhost:8080
bash scripts/test_payment_methods_api.sh
```

## ğŸ“Š æ•°æ®ç»“æ„è¯´æ˜

### æ”¯ä»˜æœåŠ¡å•†è¡¨ (payment_providers)
- å­˜å‚¨ç¬¬ä¸‰æ–¹æ”¯ä»˜æœåŠ¡å•†ä¿¡æ¯
- æ”¯æŒå¤šç§ç±»å‹ï¼šgatewayã€directã€bank
- æ— å¤–é”®çº¦æŸè®¾è®¡

### æ”¯ä»˜æ–¹å¼è¡¨ (payment_methods)
- å­˜å‚¨å‰ç«¯å±•ç¤ºçš„æ”¯ä»˜æ–¹å¼
- é€šè¿‡ provider_id é€»è¾‘å…³è”æœåŠ¡å•†
- åŒ…å«è´¹ç‡ã€é™é¢ç­‰é…ç½®ä¿¡æ¯

### å…³é”®ç‰¹ç‚¹
- **æ— å¤–é”®çº¦æŸ** - æé«˜æ€§èƒ½å’Œçµæ´»æ€§
- **é€»è¾‘å…³è”** - é€šè¿‡åº”ç”¨ä»£ç ä¿è¯æ•°æ®ä¸€è‡´æ€§
- **è‡ªåŠ¨ç´¢å¼•** - GORMå’Œè„šæœ¬ä¼šåˆ›å»ºå¿…è¦çš„ç´¢å¼•
- **æ•°æ®éªŒè¯** - åº”ç”¨å±‚å’ŒSQLè„šæœ¬åŒé‡ä¿éšœ

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ•°æ®ä¸€è‡´æ€§** - å®šæœŸè¿è¡Œå®Œæ•´æ€§æ£€æŸ¥è„šæœ¬
2. **å¤‡ä»½é‡è¦** - ä¿®æ”¹æ•°æ®å‰è¯·å¤‡ä»½æ•°æ®åº“
3. **æµ‹è¯•ç¯å¢ƒ** - å»ºè®®å…ˆåœ¨æµ‹è¯•ç¯å¢ƒéªŒè¯è„šæœ¬
4. **æƒé™æ§åˆ¶** - ç¡®ä¿æ•°æ®åº“ç”¨æˆ·æœ‰è¶³å¤Ÿæƒé™æ‰§è¡Œè„šæœ¬
